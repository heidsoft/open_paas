define(["jquery"],function(e){function a(a,r,s,n){function l(e,a,r){var s;try{s=JSON.parse(r.responseText),s=JSON.stringify(s,null,4)}catch(a){s=e}p.find(".sample-request-response-json").html(s),t()}function u(e,a,r){var s,n="Error "+e.status+": "+r;try{s=JSON.parse(e.responseText),s=JSON.stringify(s,null,4)}catch(a){s=escape(e.responseText)}s&&(n+="<br>"+s),p.find(".sample-request-response").is(":visible")&&p.find(".sample-request-response").fadeTo(1,.1),p.find(".sample-request-response").fadeTo(250,1),p.find(".sample-request-response-json").html(n),t()}var p=e('article[data-group="'+a+'"][data-name="'+r+'"][data-version="'+s+'"]'),o={};p.find(".sample-request-header:checked").each(function(a,r){var t=e(r).data("sample-request-header-group-id");p.find('[data-sample-request-header-group="'+t+'"]').each(function(a,r){var t=e(r).data("sample-request-header-name"),s=r.value;r.optional||""===r.defaultValue||(s=r.defaultValue),o[t]=s})});var i={},d={};p.find(".sample-request-param:checked").each(function(a,r){var t=e(r).data("sample-request-param-group-id");p.find('[data-sample-request-param-group="'+t+'"]').each(function(a,r){var t=e(r).data("sample-request-param-name"),s=r.value;r.optional||""===r.defaultValue||(s=r.defaultValue),i[t]=s,d[t]=e(r).next().text()})});for(var c=p.find(".sample-request-url").val(),f=pathToRegexp(c,null),m=f.exec(c),v=1;v<m.length;v++){var h=m[v].substr(1);void 0!==i[h]&&(c=c.replace(m[v],encodeURIComponent(i[h])),delete i[h])}p.find(".sample-request-response").fadeTo(250,1),p.find(".sample-request-response-json").html("Loading..."),t(),_.each(i,function(e,a){var r=d[a].toLowerCase();if("object"===r||"array"===r)try{i[a]=JSON.parse(e)}catch(e){}});var q={url:c,headers:o,data:i,type:n.toUpperCase(),success:l,error:u};e.ajax(q)}function r(a,r,s){var n=e('article[data-group="'+a+'"][data-name="'+r+'"][data-version="'+s+'"]');n.find(".sample-request-response-json").html(""),n.find(".sample-request-response").hide(),n.find(".sample-request-param").each(function(e,a){a.value=""});var l=n.find(".sample-request-url");l.val(l.prop("defaultValue")),t()}function t(){e('[data-spy="scroll"]').each(function(){e(this).scrollspy("refresh")})}var s=function(){e(".sample-request-send").off("click"),e(".sample-request-send").on("click",function(r){r.preventDefault();var t=e(this).parents("article"),s=t.data("group"),n=t.data("name"),l=t.data("version");a(s,n,l,e(this).data("sample-request-type"))}),e(".sample-request-clear").off("click"),e(".sample-request-clear").on("click",function(a){a.preventDefault();var t=e(this).parents("article"),s=t.data("group"),n=t.data("name"),l=t.data("version");r(s,n,l)})};return{initDynamic:s}});